# ========== CONFIGURA√á√ïES DE PRODU√á√ÉO ==========
# Este arquivo √© carregado automaticamente quando QUARKUS_PROFILE=prod
# Usado no VPS com Docker Compose
#
# ‚ö†Ô∏è  PROTE√á√ÉO CR√çTICA: NUNCA limpar banco de produ√ß√£o (quarkus_db)!

# ========== DATABASE (PROD) ==========
# Banco de PRODU√á√ÉO - PROTEGIDO contra reset/limpeza
quarkus.datasource.jdbc.url=jdbc:postgresql://${DB_PROD_HOST:quarkus_postgres}:${DB_PROD_PORT:5432}/${DB_PROD_NAME:quarkus_db}
quarkus.datasource.username=${DB_PROD_USERNAME:quarkus}
quarkus.datasource.password=${DB_PROD_PASSWORD:quarkus123}

# ========== HTTP (PROD) ==========
# Porta interna (NGINX gerencia SSL externamente)
quarkus.http.host=0.0.0.0
quarkus.http.port=8083

# SSL DESABILITADO (NGINX proxy reverso gerencia)
# N√ÉO configure SSL aqui - deixe o proxy reverso cuidar disso!
# SSL (Apenas para desenvolvimento local)
# Esta COMENTADO EM PRODU√á√ÉO pois o SSL √© gerenciado pelo NGINX - Tradeoff de simplicidade vs seguran√ßa
# quarkus.http.ssl.port=8443
# quarkus.http.ssl.certificate.key-store-file=security/keystore.p12
# quarkus.http.ssl.certificate.key-store-password=quarkus
# quarkus.http.insecure-requests=disabled

# ========== FLYWAY (PROD) ==========
# üö® REGRA INVIOL√ÅVEL: NUNCA limpar banco de produ√ß√£o!
# ‚ö†Ô∏è  clean-at-start=false √â OBRIGAT√ìRIO EM PRODU√á√ÉO!
# Qualquer tentativa de mudar para true causar√° perda de dados
quarkus.flyway.clean-at-start=false
quarkus.flyway.migrate-at-start=true
quarkus.flyway.baseline-on-migrate=true

# ========== HIBERNATE (PROD) ==========
quarkus.hibernate-orm.database.generation=none
quarkus.hibernate-orm.log.sql=false

# ========== LOGS (PROD) ==========
quarkus.log.level=INFO
quarkus.log.console.enable=true
quarkus.log.console.format=%d{yyyy-MM-dd HH:mm:ss} %-5p [%c{2.}] %s%e%n

# ========== SWAGGER UI / OpenAPI (PROD - DESABILITADO) ==========
# DESABILITA Swagger UI em produ√ß√£o por seguran√ßa
quarkus.swagger-ui.enable=false
quarkus.swagger-ui.always-include=false

# ========== OWNERSHIP VALIDATION (PROD) ==========
# üîí SEGURAN√áA CR√çTICA: Chave secreta para valida√ß√£o HMAC
# OBRIGAT√ìRIO: Use vari√°vel de ambiente em produ√ß√£o!
# NUNCA commite a chave de produ√ß√£o no Git
# Defina OWNERSHIP_VALIDATION_SECRET no docker-compose.yml ou no ambiente VPS
ownership.validation.secret=${OWNERSHIP_VALIDATION_SECRET}
