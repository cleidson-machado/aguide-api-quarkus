# ========== CONFIGURAÇÕES DE TESTE ==========
# Este arquivo é carregado automaticamente quando @QuarkusTest executa

# ========== AUTENTICAÇÃO (DESABILITADA EM TESTES) ==========
# Desabilita o AuthenticationFilter para permitir testes sem token
quarkus.arc.exclude-types=br.com.aguideptbr.auth.AuthenticationFilter

# ========== HTTP (TEST) ==========
quarkus.http.port=8081
quarkus.http.test-port=8081

# ========== DATABASE (TEST) ==========
# Usa banco em memória H2 para testes rápidos
quarkus.datasource.db-kind=h2
quarkus.datasource.jdbc.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1
quarkus.datasource.username=sa
quarkus.datasource.password=

# ========== FLYWAY (TEST) ==========
# Limpa e recria o banco a cada execução de teste
quarkus.flyway.clean-at-start=true
quarkus.flyway.migrate-at-start=true
# Usa migrations específicas do H2 (sintaxe compatível)
quarkus.flyway.locations=classpath:db/migration/h2

# ========== HIBERNATE (TEST) ==========
quarkus.hibernate-orm.database.generation=none
quarkus.hibernate-orm.log.sql=false

# ========== LOGS (TEST) ==========
quarkus.log.level=INFO
quarkus.log.console.enable=true
